# 스타트업 서비스 설계는 처음인데요

- [책](https://product.kyobobook.co.kr/detail/S000218148637)
- [원본 root 트윗](https://x.com/ujuc/status/1980937966106349733)

---

> 목표는 '서비스 출시'여야 하며, 좀 더 현실적으로는 **서비스 출시 전까지의 생존**의 스타트업 대부분의 초기 목표이다.

<주해>
왜인지 모르겠으나, 스타트업 개발자들은 이것에 대해서 잊고 있는 듯하다. 출시 후에도 살아남는 것이 목표이다.

---

> 서비스를 개발하기 전에 개발자가 가장 먼저 할 일은 이런 것이 아니라, 놀랍게도 개발할 서비스의 성격을 파악하는 일이다. 서비스의 성격을 파악한 뒤에는 개발에 필요한 핵심 인력을 구성해야 하고, 그다음에서 야 서비스에 맞는 기술을 선택한다.
>
> 서비스를 출시한 다음에는 그동안 쌓인 기술 부채를 줄여야 한다.

<주해>
인력 구성이야기는 짧게 끝났는데. 이게 다긴하다.

---

> 기술을 선택할 때 조심할 점은 지금 유행하는 기술이 선택의 기준이 되어서는 안된다는 점이다.
>
> 학습 속도와 문제 해결은 별개의 문제이다.
>
> 가급적 개발자가 능숙하게 다룰 수 있는 기술을 선택하기를 바란다.
>
> 기술 숙련도 자체가 동료를 선택하는 유일한 기준이 되어서는 안 된다.
>
> 개인의 업무 범위가 넓고, 동료간 의견 교환이 중요하기에 기존 동료와 잘 어울릴 수 있는 사람은 채용해야 한다. 보통 이를 '기업 문화와 어울린다'라고 표현한다.

<주해>
할 말은 많으나 하지 않는다.

---

> 스타트업에서 발생할 수 있는 기술 부채를 크게 일곱가지로 분류할 수 있다.
> - 잘못된 선택과 오버 엔지니어링
> - 스파게티 코드/빈약한 예외처리
> - 자동화된 테스트 케이스의 부족
> - 로그 수집 또는 확인 방법
> - 모니터링의 부족
> - 수동 배포나 서비스 설정 변경
> - 통계 정보

<주해>
저 기술 부채는 하나만 있지 않고, 여러 개가 있지만, 전부 다 있는 경우가 많다.
특히나 이력서 주도 개발을 하게 되면 이 회사를 기반으로 다른 회사를 갈 수 있는 발판을 만들기 위해서 최신 기술, 시장에서 요즘 많이 사용되는 기술로 구축하는 경우가 너무 많다.

---

> AWS 를 사용하면 클라우드 와치가 기본 모니터링 도구로 제공되는데, 클라우드와치로는 메모리 사용량이나 디스크 사용량을 확인할 수 없으니 반드시 추가로 설정해야 한다.

<주해>
CloudWatch는 대표적인 블랙박스 모니터링 서비스. 하이퍼바이저에서 볼 수 있는 내용을 기본으로 제공한다.
CloudWatch Agent를 이용하여 인스턴스에 설치해 두면 화이트박스 모니터링이 가능하게 된다.

---

> 다수의 패키지를 관리하려면 부족한 면이 있다. 그래서 관리할 패키지가 많다면 앤서블(ansible) 같은 도구를 추가로 사용하고 반대로 관리할 패키지가 많지 않다면 골든 이미지(Golden Image)를 만들어 사용하기도 한다.

<주해>
빠른 `init`을 위한다면 무조건 골든 이미지를 먼저 만들어서 사용할 수 있도록 한다.
그리고 클라우드 프로바이더를 이용한다면, 기본적으로 `init` 스크립트를 동작할 수 있는 방법이 있으니, 그것을 이용하는 것이 나을 수 있다.

나 같은 경우엔 컨테이너를 이용하여 배포하고 그것을 오케스트레이션을 하려고 노력한다. 앞에서 이야기한 내용들을 컨테이너를 관리하는 레벨에서 작업할 수 있기에, 개발자가, DevOps에서 수정하기 편한 상태가 된다.

---

> 경험이 적은 팀이거나, 스타트업이라면 서비스 초기 개발에는 모놀리식 아키텍처를 강력하게 권한다. 서비스 개발 초기에는 기능이나 요구사항 변경이 잦은데, MSA에서는 작은 변경조차도 전체에 영향을 미친다. 더군다나 MSA는 기본 성능에서도 통신 비용이 발생할 수 있는 터라 변경 사항이 많은 개발 초기에는 모놀리식 아키텍처를 선택하는 편이 좋다.

<주해>
처음부터 MSA(Micro-Service Architecture)를 선택하게 되면 적은 인원이 너무 많은 수정 사항을 맞닥뜨려야 한다.
그것을 방지하기 위해서라도 모놀릭으로 가고, 이후 필요한 시점에 변경을 하는 것을 추천한다.
MSA를 이야기하던 회사들은 자신의 서비스가 모놀릭으로 개발을 할 수 없어져서 해결책을 찾아 나간 것이라는 점을 알아야 한다.

---

> 하지만, 긴급히 변경해야 하거나, 빈번하게 변경할 가능성이 있다면, 설정 변경이 가능하도록 설계할 필요가 있다. 설정 변경 기능을 어드민 페이지로 제공하면 운영 팀에서 직접 해당 업무를 처리할 수 있어 개발 팀의 부담이 줄어든다.

<주해>
운영자에게도 좋지만 장애 났을 때 해당 기능만 바이패스 할 수 있도록 구성할 수도 있다.

---

> 꼭 필요한 기능에 집중
> 단순한 구조의 선택: 중요한 것은 팀의 역량과 상황에 맞는 가장 효율적인 기술 스택이다.

<주해>
완전히 초기에 참여하기 힘든 직군이지만, 조금은 고민해 줬으면 하는 부분이다.
간단히라도 o11y(Observability)를 해 놨으면 모르겠으나, 최소한의 로그라도 제대로 남겨 둔다면, 우선 나부터 편하게 장애를 대응할 수 있다.
